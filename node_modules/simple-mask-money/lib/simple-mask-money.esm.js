const e={allowNegative:!1,negativeSignAfter:!1,decimalSeparator:",",fixed:!0,fractionDigits:2,prefix:"",suffix:"",thousandsSeparator:".",cursor:"end",allowEmpty:!1};function t(t){return Object.assign(Object.assign({},e),t)}const n="0123456789".split("");function r(e,r){const i=t(r),{beforeFormat:l,afterFormat:o,allowNegative:s,negativeSignAfter:u,fractionDigits:a,decimalSeparator:c,thousandsSeparator:f,fixed:g,prefix:d,suffix:h,cursor:m,allowEmpty:p}=i;if("undefined"==typeof document)return()=>{};const v="string"==typeof e?document.querySelector(e):null!=e?e:null;if(null===v)return()=>{};if(!(v instanceof HTMLInputElement))throw new Error("the element must be an input");const y=g?"0":"_";v.hasAttribute("inputmode")||v.setAttribute("inputmode","numeric");const b=(e,t)=>{v.value=e,v.dispatchEvent(new InputEvent("input")),A(t),j=e,null==o||o(e)},k=d.length,S=[...n,"Backspace",s?"-":""],w=3+c.length+a,E=e=>{var t;return null!==(t=null==e?void 0:e.length)&&void 0!==t?t:v.value.length-h.length},N=e=>e<k,$=e=>h.length>0&&e>E(),x=(e,t=!1,n)=>{let r;const i=[...e];let l=new Array;if(n){[r]=n;const[,e]=n,[t,l]=e,o=i.splice(...e);if("remove"===r&&1===o.length){const[e]=o;e!==c&&e!==f||i.splice(t-1,l)}}let o=w,s=!1,g=0,m=!1;for(let e;e=i.pop();)if("-"!==e)if(e===c&&s&&t){const e=l.indexOf(c);l.splice(e,c.length);const t=l.slice(0,a);t.length<l.length&&(o+=l.length-t.length),l=[c,...t],s=!0}else Number.isNaN(Number(e))||" "===e||(o-=1,e===y?g+=1:e!==c&&g>0&&(g=0),0===o&&(l.unshift(f),o=3),l.unshift(e),l.length!==a||s||(l.unshift(c),s=!0));else m=!0;return 0!==g&&l.splice(0,g),l.every((e=>e===y))&&"remove"===r&&(m=!1),l.length<=a?l=[y,c,l.join("").padStart(a,y)]:l.length===a+c.length&&l.unshift(y),m&&l[u?"push":"unshift"]("-"),(e=>`${d}${e}${h}`)(l.join(""))},A=e=>{const t=E();let n=[t,t];return"move"===m&&e&&(n="number"==typeof e[1]?[e[0],e[1]]:[e[0],e[0]]),v.setSelectionRange(...n),n};null==l||l(v.value);const M=x(v.value.split(""),!0);let j=M;const L=e=>{var t,n;null==l||l(v.value);const r=E();let i=null!==(t=v.selectionStart)&&void 0!==t?t:r,o=null!==(n=v.selectionEnd)&&void 0!==n?n:r;if("Enter"===e.key)return;if("Tab"===e.key)return;if(e.ctrlKey&&"a"===e.key)return A([k,r]);if(e.ctrlKey&&"z"===e.key)return b(M);if("move"===m&&("ArrowLeft"===e.key&&i>k||"ArrowRight"===e.key&&i<r))return;if(e.preventDefault(),e.ctrlKey&&"a"===e.key)return A([k,r]);if(!S.includes(e.key))return;const s="Backspace"===e.key;if(N(i)&&([i,o]=A([k])),$(i)&&([i,o]=A([r])),s&&0===i)return;if(p&&s&&v.value.length<=d.length+1)return void b(d);const u=v.value.split(""),a=Math.abs(o-i),c=a>0,f=c?[i,a]:[i-1,1],g=[i,c?a:0,e.key],h=s?"remove":"add",y=x(u,!1,[h,{add:g,remove:f}[h]]);if(!s&&j.length<y.length&&i<E(y))i+=y.length-j.length,o+=y.length-j.length;else if(s&&j.length>y.length&&i>k){const e=j.length-y.length;i=i-e<=k?k:i-e,o=o-e<=k?k:o-e}b(y,[i,o])},O=()=>{if(document.activeElement!==v)return;const e=v.selectionStart,t=v.selectionEnd;if("number"!=typeof e||"number"!=typeof t)return;let n;const r=N(e),i=$(t),l=$(e),o=N(t);(r||i||o||l)&&(n=[r?k:i?E():e,o?k:i?E():t]),n&&A(n)};if(b(p&&M===`${d}0`?"":M),v.hasAttribute("readonly")||v.hasAttribute("disabled"))return()=>{};v.addEventListener("keydown",L),document.addEventListener("selectionchange",O);const T=()=>{v.removeEventListener("keydown",L),document.removeEventListener("selectionchange",O),delete v.removeMask};return Object.defineProperty(v,"removeMask",{value:T,configurable:!0,enumerable:!0,writable:!0}),T}function i(e){if("undefined"==typeof document)return()=>{};const t="string"==typeof e?document.querySelector(e):null!=e?e:null;if(null===t)return()=>{};if(!(t instanceof HTMLInputElement))throw new Error("the element must be an input");return()=>{if("removeMask"in t&&"function"==typeof t.removeMask)return t.removeMask()}}function l(e,n){const{decimalSeparator:r,allowNegative:i}=t(n),l=e=>e.toString().replace(".",r),o=("number"==typeof e?l(e):(e=>{const t=Number(e);return Number.isNaN(t)?e:l(t)})(e)).split("");let s="";const u=i&&o.includes("-");for(let e;e=o.shift();)Number.isNaN(Number(e))||(s+=e),e===r&&(s+=".");return parseFloat(`${u?"-":""}${s}`)}function o(e,t){return(n,r={})=>e(n,Object.assign(Object.assign({},t),r))}function s(e,n){const{fixed:r,prefix:i,suffix:o,fractionDigits:s,thousandsSeparator:u,decimalSeparator:a,allowNegative:c,negativeSignAfter:f}=t(n),g=r?"0":"_",d=e=>`${i}${e}${o}`,h=e=>e.padEnd(s,g),m=e.toString();if(0===m.length)return d(`${g}${a}${h("")}`);let p="";const v=c&&m.includes("-"),y=l(e,n).toString().replace("-",""),[b,k]=y.toString().split("."),S=h(k?k.substring(0,s):""),w=[];for(let e=0;e<b.length;e+=3)w.unshift(b.substring(b.length-e,b.length-e-3));return p=`${w.join(u)}${a}${S}`,v&&(p=f?`${p}-`:`-${p}`),d(p)}const u={setMask:r,removeMask:i,formatToNumber:l,createInstanceOf:o,formatToCurrency:s};export{o as createInstanceOf,u as default,s as formatToCurrency,l as formatToNumber,i as removeMask,r as setMask};
//# sourceMappingURL=simple-mask-money.esm.js.map
